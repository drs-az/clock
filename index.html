<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>The Santos Clock</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
  :root {
    --bg1: #87ceeb;
    --bg2: #fefcea;
  }

  body {
    margin: 0;
    font-family: system-ui, sans-serif;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: background 1.2s linear;
    background: linear-gradient(to bottom, var(--bg1), var(--bg2));
  }

  .box {
    background: rgba(255,255,255,0.3);
    padding: 2.5rem 3rem;
    border-radius: 1.5rem;
    backdrop-filter: blur(10px);
    box-shadow: 0 10px 30px rgba(0,0,0,0.15);
    text-align: center;
    max-width: 750px;
    width: 90%;
  }

  h1 {
    margin: 0 0 1rem;
    font-size: 2rem;
  }

  .equation {
    font-size: 1.5rem;
    font-weight: 600;
    margin: 1.3rem 0;
    line-height: 2.3rem;
  }

  .inputs {
    margin-top: 1rem;
    font-size: 1.2rem;
  }

  input {
    padding: 0.5rem;
    border-radius: 0.5rem;
    border: 1px solid #999;
    font-size: 1.1rem;
    width: 80px;
    text-align: center;
  }

  button {
    padding: 0.6rem 1.2rem;
    font-size: 1.1rem;
    margin-top: 1rem;
    border: none;
    border-radius: 0.5rem;
    cursor: pointer;
    background: #0077ff;
    color: white;
    font-weight: 600;
  }

  button:hover {
    background: #005fcc;
  }

  .result {
    margin-top: 1rem;
    font-size: 1.3rem;
    font-weight: 700;
  }

  .correct {
    color: green;
  }

  .incorrect {
    color: #b00020;
  }
</style>
</head>
<body>

<div class="box">
  <h1>The Santos Clock</h1>

  <div id="hoursEq" class="equation"></div>
  <div id="minutesEq" class="equation"></div>
  <div id="ampm" class="equation"></div>

  <div class="inputs">
    <div>
      <label>Hour:</label>
      <input id="hourInput" type="number" min="1" max="12">
    </div>
    <div style="margin-top: 0.7rem;">
      <label>Minutes:</label>
      <input id="minuteInput" type="number" min="0" max="59">
    </div>
    <button onclick="checkAnswer()">Check Answer</button>
    <div id="result" class="result"></div>
  </div>
</div>

<script>
/* -------------------------
   SKY BACKGROUND
------------------------- */
function updateSky() {
  const hour = new Date().getHours();
  let top, bottom;

  if (hour >= 5 && hour < 8) {
    top="#ff9a9e"; bottom="#fad0c4";
  } else if (hour >= 8 && hour < 12) {
    top="#87ceeb"; bottom="#fefcea";
  } else if (hour >= 12 && hour < 17) {
    top="#78c1f3"; bottom="#e0f7fa";
  } else if (hour >= 17 && hour < 20) {
    top="#f6d365"; bottom="#fda085";
  } else {
    top="#0f2027"; bottom="#203a43";
  }

  document.documentElement.style.setProperty("--bg1", top);
  document.documentElement.style.setProperty("--bg2", bottom);
}

/* -------------------------
   UTILITIES
------------------------- */
function randInt(min, max) {
  return Math.floor(Math.random() * (max - min + 1)) + min;
}

function to12Hour(h) {
  const period = h >= 12 ? "PM" : "AM";
  let hour = h % 12;
  if (hour === 0) hour = 12;
  return { hour, period };
}

/* -------------------------
   EQUATION GENERATORS
------------------------- */
function linearEq(value, v) {
  const a = randInt(1, 9);
  const c = randInt(1, 9);
  const x = randInt(1, 9);
  const b = value * c - a * x;
  return `(${a}${v} + ${b}) / ${c} = ?`;
}

function fractionalEq(value, v) {
  const x = randInt(2, 9);
  const a = randInt(0, value);
  const b = (value - a) * x;
  return `${a} + (${b} / ${x}) = ?`;
}

function quadraticEq(value, v) {
  const m = randInt(1, 5);
  const x = randInt(2, 9);
  const k = x*x - value*m;
  return `(${v}² - ${k}) / ${m} = ?   (where ${v} = ${x})`;
}

const types = [linearEq, fractionalEq, quadraticEq];

/* -------------------------
   MAIN LOGIC
------------------------- */
let lastMinute = -1;
let correctHour = null;
let correctMinute = null;
let correctPeriod = null;

function updateClock() {
  const now = new Date();
  const hours24 = now.getHours();
  const minutes = now.getMinutes();
  const { hour, period } = to12Hour(hours24);

  updateSky();

  // Only regenerate equations when minute changes
  if (minutes !== lastMinute) {
    lastMinute = minutes;

    correctHour = hour;
    correctMinute = minutes;
    correctPeriod = period;

    const hourEq = types[randInt(0, types.length - 1)](hour, "x");
    const minEq  = types[randInt(0, types.length - 1)](minutes, "y");

    document.getElementById("hoursEq").innerHTML =
      `Hour → <strong>${hourEq}</strong>`;
    document.getElementById("minutesEq").innerHTML =
      `Minutes → <strong>${minEq}</strong>`;
    document.getElementById("ampm").innerHTML = `Period → ${period}`;

    document.getElementById("result").innerHTML = "";
    document.getElementById("hourInput").value = "";
    document.getElementById("minuteInput").value = "";
  }
}

/* -------------------------
   CHECK ANSWER
------------------------- */
function checkAnswer() {
  const userHour = parseInt(document.getElementById("hourInput").value);
  const userMinute = parseInt(document.getElementById("minuteInput").value);
  const resultEl = document.getElementById("result");

  if (userHour === correctHour && userMinute === correctMinute) {
    resultEl.textContent = "✔ Correct!";
    resultEl.className = "result correct";
  } else {
    resultEl.textContent = "✖ Try again";
    resultEl.className = "result incorrect";
  }
}

setInterval(updateClock, 1000);
updateClock();
</script>

</body>
</html>
